/* ======================================================================
   # _components.slider.css
   ====================================================================== */

/***
 * 1. Make the list item 100% of the screen to make the item scroll side to side
 * 2. Prevent the page for being the same width as the overflow element on iOS/Safari
 */

.c-slider-js {
  --c-slider-js__min-height: 25rem;
  --c-slider__prev-next-position: -6.4rem;
  --c-slider__dots-position: -4rem;
  --c-slider-js__height: 100%;
  --c-slider-js__padding: 4rem;
  --c-slider-js__container-height: 75vh; /* Do not work with `%` because slider can't calculate height */
  --c-slider__margin: 1rem; /* [1] */
  --c-slider__container-width: 100%; /* [1] */

  @screen sm {
    --c-slider__container-width: 640px; /* [1] */
  }

  @screen md {
    --c-slider__margin: 0.5rem; /* [1] */
    --c-slider__container-width: 768px; /* [1] */
  }

  @screen lg {
    --c-slider__margin: 1rem; /* [1] */
    --c-slider__container-width: 1024px; /* [1] */
  }

  @screen xl {
    --c-slider__margin: 2rem; /* [1] */
    --c-slider__container-width: 1280px; /* [1] */
  }

  @screen 2xl {
    --c-slider__margin: 4rem; /* [1] */
    --c-slider__container-width: 1536px; /* [1] */
  }

  @apply
    bg-primary
    overflow-x-hidden
    relative /* [2] */
    ;

  padding-top: var(--c-slider-js__padding);
  padding-bottom: var(--c-slider-js__padding);
  min-height: var(--c-slider-js__min-height);
  height: var(--c-slider-js__height);
}

.c-slider-js__container {
  @apply
    flex
    flex-col
    lg:flex-row
  ;

  height: var(--c-slider-js__container-height);
}

.c-slider-js__container-left {
  flex: 1;

  @apply
    flex
    flex-col
    ;
}

.c-slider-js__container-right {
  flex: 3;
  margin-right: calc(var(--c-slider__margin) * -1); /* [2] */

  @screen sm {
    margin-right:
      calc(
        calc(
          calc(
            calc(
              100vw - var(--c-slider__container-width)
            )
            /
            2
          )
          +
          var(--c-slider__margin)
        )
        *
        -1
      ); /* [2] */
  }
}



/* -----------------------------------
 # Heading
 ----------------------------------- */

.c-slider-js__heading {
  @extend %h1;

  @apply
    text-white
    mb-8
  ;
}



/* -----------------------------------
 # Sidebar
 ----------------------------------- */

.c-slider-js__sidebar {
  @extend %scrollbar;

  @apply
    max-h-full
    overflow-y-auto

    mr-8
    pr-8
  ;
}

.c-slider-js__sidebar-list {
  @apply
    mb-4
    hidden
  ;

  @screen lg {
    @apply
      block
      overflow-y-auto
      mr-8
      pr-8
    ;
  }
}

.c-slider-js__sidebar-list-item {
  @apply
    mb-4
  ;
}

.c-slider-js__sidebar-list-link {
  @extend %caption;

  @apply
    text-primary-200
    transition-colors
  ;

  &:hover,
  &:active {
    @apply
      text-white
    ;
  }

  &:focus {
    @apply
      outline-focus
    ;
  }
}

/* -----------------------------------
 # Article
 ----------------------------------- */

/*
article
┌─────────────────────────────────────────┐
│  article-figure                         │
│ ┌─────────────────────────────────────┐ │
│ │                                     │ │
│ │                                     │ │
│ │                                     │ │
│ │                                     │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│  article-text-container                 │
│ ┌─────────────────────────────────────┐ │
│ │  article-date                       │ │
│ │ ┌─────────────────────────────────┐ │ │
│ │ │                                 │ │ │
│ │ └─────────────────────────────────┘ │ │
│ │  article-heading                    │ │
│ │ ┌─────────────────────────────────┐ │ │
│ │ │                                 │ │ │
│ │ └─────────────────────────────────┘ │ │
│ │  article-button                     │ │
│ │ ┌─────────────────────────────────┐ │ │
│ │ │                                 │ │ │
│ │ └─────────────────────────────────┘ │ │
│ │                                     │ │
│ └─────────────────────────────────────┘ │
│                                         │
└─────────────────────────────────────────┘
*/

/***
 * 1. Put image visually before text
 * 2. Image take all available space and push the text at the bottom
 * 3. Hide `<img>` tag and make it visible only for print and screen reader
 * 4. Reorder text content. Date first then heading and finally the button
 * 5. Add a line ont the left of the text when on desktop
 */

.c-slider-js__article {
  min-width: 20rem;
  width: 25vw;
  max-width: 75vw;
  height: var(--c-slider-js__container-height);

  @apply
    flex /* [1] */
    flex-col /* [1] */
    mr-4
  ;
}

.c-slider-js__article-figure {
  @apply
    order-first /* [1] */
    bg-primary-800

    bg-cover
    bg-center

    rounded
    mb-2

    flex-1 /* [2] */
  ;
}

.c-slider-js__article-image {
  @apply
    sr-only /* [3] */
    ;
}

.c-slider-js__article-text-container {
  @apply
    flex /* [4] */
    flex-col /* [4] */
  ;

  @screen md {
    @apply
      border-l /* [5] */
      border-white /* [5] */
      pl-4 /* [5] */
    ;
  }
}

.c-slider-js__article-heading {
  @extend %h3;

  @apply
    text-white
    ;
}

.c-slider-js__article-date {
  @extend %caption;

  @apply
    order-first /* [1] */
    text-primary-100

    mb-1
  ;
}

.c-slider-js__article-button {
  @apply
    text-white
  ;
}

/* -----------------------------------
 # Flickity
 ----------------------------------- */


/***
 * 1. Position dots
 * 2. Transform dots into lines
 * 3. Position prev & next button
 * 4. Fix dots line being over prev and next button and making them not
 *    100% clickable
 */

.c-slider-js .flickity-page-dots {
  bottom: var(--c-slider__dots-position); /* [1] */
}

/* dots are lines */
.c-slider-js .flickity-page-dots .dot {
  height: 0.25rem; /* [2] */
  width: 1.5vw; /* [2] */
  margin: 0; /* [2] */
  border-radius: 0; /* [2] */
}

.c-slider-js .flickity-page-dots .dot.is-selected {
  @apply
    bg-white
  ;
}

.c-slider-js .flickity-prev-next-button {
  top: auto; /* [3] */
  z-index: 20; /* [4] */
}

.c-slider-js .flickity-prev-next-button.previous,
.c-slider-js .flickity-prev-next-button.next {
  bottom: var(--c-slider__prev-next-position); /* [3] */
}

.c-slider-js .flickity-prev-next-button.previous {
  left: 0;
}

.c-slider-js .flickity-prev-next-button.next {
  right: var(--c-slider__margin);
}
